<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Noe - Tableau de bord</title>

  <!-- Font Awesome + Chart.js -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* ========= THEME DARK TURQUOISE ========= */
    :root{
      --bg:#0b1220;
      --sidebar:#0f1720;
      --panel:#1f2937;
      --muted:#9aa4b2;
      --accent:#00c2a8;
      --accent-2:#05827d;
      --text:#e6eef8;
      --border:rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,Arial,"Helvetica Neue",Helvetica,sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Layout */
    .app{display:flex;min-height:100vh}
    /* Sidebar */
    .sidebar{
      width:260px;
      background:linear-gradient(180deg,var(--sidebar),#071219);
      padding:18px;
      border-right:1px solid var(--border);
      transition:left .22s ease;
    }
    .brand{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    .brand i{font-size:22px;color:var(--accent)}
    .brand h1{margin:0;font-size:18px;color:var(--text);letter-spacing:1px}
    nav.nav{margin-top:12px}
    nav.nav button{
      width:100%;display:flex;align-items:center;gap:12px;padding:10px;border-radius:8px;border:none;
      background:transparent;color:rgba(255,255,255,0.95);font-weight:600;cursor:pointer;text-align:left;
    }
    nav.nav button:hover{background:rgba(255,255,255,0.02)}
    nav.nav button.active{background:linear-gradient(90deg,rgba(0,194,168,0.12),rgba(0,194,168,0.03));border-left:3px solid var(--accent)}
    nav.nav i{width:20px;text-align:center;color:var(--muted)}

    .sidebar .support{margin-top:18px;font-size:13px;color:var(--muted)}

    /* Main */
    .main{flex:1;padding:20px;overflow:auto}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;gap:12px}
    .title h2{margin:0;color:var(--accent)}
    .title small{color:var(--muted)}
    .user{display:flex;align-items:center;gap:12px}
    .avatar{width:44px;height:44px;border-radius:8px;object-fit:cover;border:2px solid rgba(255,255,255,0.03)}

    /* Responsive hamburger button (top-left) */
    .hamburger{display:none;background:none;border:none;font-size:22px;color:var(--accent);cursor:pointer;margin-right:8px}
    @media(max-width:980px){
      .sidebar{position:fixed;left:-280px;top:0;height:100vh;z-index:999}
      .sidebar.open{left:0}
      .hamburger{display:inline-block}
      .main{padding:14px}
    }

    /* Cards grid */
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-bottom:14px}
    .card{background:var(--panel);padding:14px;border-radius:10px;border:1px solid var(--border);box-shadow:0 8px 24px rgba(0,0,0,0.45)}
    .card h3{margin:0;color:var(--muted);font-size:13px}
    .card .value{font-size:20px;font-weight:800;margin-top:8px;color:var(--text)}
    .card .foot{font-size:13px;color:var(--muted);margin-top:8px}

    /* Charts layout */
    .charts{display:grid;grid-template-columns:2fr 1fr;gap:14px;margin-bottom:14px}
    .chart-card{background:var(--panel);padding:12px;border-radius:10px;border:1px solid var(--border)}
    canvas{width:100%!important;height:260px!important}

    /* Service overview */
    .service-info{background:var(--panel);padding:12px;border-radius:10px;border:1px solid var(--border);color:var(--muted)}
    .service-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;margin-top:10px}
    .service-item{background:transparent;padding:12px;border-radius:8px;text-align:center}

    /* Lists: products / vehicles */
    .list{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;margin-bottom:14px}
    .item{display:flex;gap:12px;padding:12px;border-radius:10px;background:var(--panel);border:1px solid var(--border);align-items:flex-start}
    .item img{width:160px;height:100px;object-fit:cover;border-radius:8px;background:#071016}
    .item .meta h4{margin:0 0 6px 0;color:var(--text);font-size:16px}
    .item .meta p{margin:0;color:var(--muted);font-size:13px}
    .price{margin-top:8px;font-weight:800;color:var(--accent)}
    .btn{display:inline-block;margin-top:10px;padding:8px 14px;background:var(--accent);color:#00211d;border-radius:8px;font-weight:800;text-decoration:none}

    /* Clients table */
    .clients{background:var(--panel);padding:12px;border-radius:10px;border:1px solid var(--border)}
    table{width:100%;border-collapse:collapse;color:var(--text)}
    th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,0.03);font-size:14px;text-align:left}
    th{color:var(--muted);font-weight:700}
    .status{padding:6px 10px;border-radius:18px;font-weight:700;font-size:12px}
    .status.active{background:rgba(0,194,168,0.12);color:var(--accent)}
    .status.pending{background:rgba(247,37,133,0.12);color:var(--warning)}

    /* Reports / settings cards */
    .reports-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px}
    .report-card{background:var(--panel);padding:12px;border-radius:10px;border:1px solid var(--border);color:var(--muted)}
    .report-card h4{color:var(--accent);margin:0 0 8px 0}

    .settings-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
    .settings-card{background:var(--panel);padding:12px;border-radius:10px;border:1px solid var(--border);color:var(--muted)}

    /* Chat quick access */
    .chat-btn{position:fixed;right:20px;bottom:20px;width:56px;height:56px;border-radius:12px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#02110f;cursor:pointer;z-index:999}
    .chat-panel{position:fixed;right:20px;bottom:88px;width:320px;background:var(--panel);border-radius:12px;padding:10px;display:none;flex-direction:column;z-index:999;border:1px solid var(--border)}
    .chat-panel header{display:flex;justify-content:space-between;align-items:center;color:var(--text);border-bottom:1px solid rgba(255,255,255,0.03);padding-bottom:8px}
    .chat-messages{max-height:260px;overflow:auto;padding:8px;display:flex;flex-direction:column;gap:8px}
    .chat-messages .bot{align-self:flex-start;background:#071a1a;padding:8px;border-radius:8px;color:var(--text)}
    .chat-messages .user{align-self:flex-end;background:var(--accent);padding:8px;border-radius:8px;color:#02110f}
    .chat-panel footer{display:flex;gap:8px;padding-top:8px}
    .chat-panel input{flex:1;padding:8px;border-radius:8px;border:none;background:transparent;color:var(--text)}

    /* small */
    @media(max-width:700px){
      .charts{grid-template-columns:1fr}
      canvas{height:220px!important}
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar" aria-label="Navigation principale">
      <div class="brand" role="banner">
        <i class="fas fa-warehouse"></i>
        <h1>NOE</h1>
      </div>

      <nav class="nav" role="navigation" aria-label="Menu principal">
        <button class="active" data-section="dashboard"><i class="fas fa-home"></i> Dashboard</button>
        <button data-section="loan"><i class="fas fa-car"></i> Prêts Auto</button>
        <button data-section="poultry"><i class="fas fa-egg"></i> Production Avicole</button>
        <button data-section="clients"><i class="fas fa-users"></i> Clients</button>
        <button data-section="reports"><i class="fas fa-chart-bar"></i> Rapports</button>
        <button data-section="settings"><i class="fas fa-cog"></i> Paramètres</button>
      </nav>

      <div class="support">
        <strong>Support</strong><br>
        <small style="color:var(--muted)">support@noe.example</small>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main" id="main">
      <div class="topbar" role="region" aria-label="Barre supérieure">
        <div style="display:flex;align-items:center;gap:12px">
          <button class="hamburger" id="hamburger" aria-label="Ouvrir le menu"><i class="fas fa-bars"></i></button>
          <div class="title"><h2>Dashboard</h2><small style="color:var(--muted)">Aperçu général</small></div>
        </div>

        <div class="user" aria-label="Informations utilisateur">
          <div style="text-align:right">
            <div style="font-weight:700">Admin</div>
            <small style="color:var(--muted)">Dernière connexion : Aujourd'hui</small>
          </div>
          <img class="avatar" src="https://ui-avatars.com/api/?name=Admin+Noe&background=00c2a8&color=fff" alt="Avatar admin">
        </div>
      </div>

      <!-- ===== DASHBOARD (full content + charts) ===== -->
      <section id="dashboard-content" class="content-section" style="display:block">
        <!-- Cards -->
        <div class="cards" role="region" aria-label="Statistiques rapides">
          <div class="card"><h3>Prêts Approuvés</h3><div class="value">17,400.00 G</div><div class="foot">Ce mois</div></div>
          <div class="card"><h3>Prêts en Attente</h3><div class="value">2,700.00 G</div><div class="foot">En traitement</div></div>
          <div class="card"><h3>Production Mensuelle</h3><div class="value">14,000 œufs</div><div class="foot">Total production</div></div>
          <div class="card"><h3>Bénéfice Net</h3><div class="value">45,000 G</div><div class="foot">Ce mois</div></div>
        </div>

        <!-- Charts -->
        <div class="charts" role="region" aria-label="Graphiques">
          <div class="chart-card">
            <h3 style="margin:0 0 8px 0;color:var(--accent)">Évolution Prêts & Revenus</h3>
            <canvas id="financeChart" aria-label="Graphique des revenus et dépenses"></canvas>
          </div>

          <div class="chart-card">
            <h3 style="margin:0 0 8px 0;color:var(--accent)">Répartition des Services</h3>
            <canvas id="serviceChart" aria-label="Diagramme répartition services"></canvas>
          </div>
        </div>

        <div class="service-info" role="region" aria-label="Résumé des services">
          <strong style="color:var(--accent)">Résumé des services</strong>
          <p style="margin-top:8px;color:var(--muted)">Plateforme gérant prêts auto et production avicole — réservation, commandes, suivi clients et rapports complets.</p>

          <div class="service-grid">
            <div class="service-item"><i class="fas fa-car-side"></i><div style="margin-top:8px;color:var(--text)">Prêts & Location</div></div>
            <div class="service-item"><i class="fas fa-egg"></i><div style="margin-top:8px;color:var(--text)">Production Avicole</div></div>
            <div class="service-item"><i class="fas fa-users"></i><div style="margin-top:8px;color:var(--text)">Clients</div></div>
            <div class="service-item"><i class="fas fa-chart-line"></i><div style="margin-top:8px;color:var(--text)">Rapports</div></div>
          </div>
        </div>
      </section>

      <!-- ===== LOAN (Prêts Auto) ===== -->
      <section id="loan-content" class="content-section" style="display:none">
        <h3 style="color:var(--accent);margin:0 0 10px 0">Prêts Auto & Location</h3>

        <div class="cards" aria-hidden="false">
          <div class="card"><h3>Prêts Approuvés</h3><div class="value">17,400.00 G</div><div class="foot">Ce mois</div></div>
          <div class="card"><h3>Remboursements</h3><div class="value">980.00 G</div><div class="foot">Ce mois</div></div>
          <div class="card"><h3>Solde Restant</h3><div class="value">1,720.00 G</div><div class="foot">Disponible</div></div>
        </div>

        <div class="service-info"><strong style="color:var(--accent)">Véhicules disponibles</strong><p style="color:var(--muted);margin-top:8px">Choisissez et réservez — toutes les réservations mènent à la page de vente pour compléter l'achat / paiement.</p></div>

        <div class="list" role="list">
          <div class="item" role="listitem">
            <img src="images/toyota.jpg" alt="Toyota Corolla">
            <div class="meta">
              <h4>Toyota Corolla 2022</h4>
              <p>1.8L • Consommation optimisée • Garantie 3 ans • Idéale ville/route.</p>
              <div class="price">$40 / jour</div>
              <a class="btn" href="sell.html?type=car&model=Toyota%20Corolla%202022&price=40">Réserver</a>
            </div>
          </div>

          <div class="item" role="listitem">
            <img src="images/hyundai.jpg" alt="Hyundai Elantra">
            <div class="meta">
              <h4>Hyundai Elantra 2021</h4>
              <p>Compacte et économique • Entretien récent • Parfaite pour la ville.</p>
              <div class="price">$70 / jour</div>
              <a class="btn" href="sell.html?type=car&model=Hyundai%20Elantra%202021&price=70">Réserver</a>
            </div>
          </div>

          <div class="item" role="listitem">
            <img src="images/mercedes.jpg" alt="Mercedes Classe C">
            <div class="meta">
              <h4>Mercedes Classe C 2023</h4>
              <p>Confort premium • Système audio haut de gamme • Idéale événements et déplacements pro.</p>
              <div class="price">$120 / jour</div>
              <a class="btn" href="sell.html?type=car&model=Mercedes%20Classe%20C%202023&price=120">Réserver</a>
            </div>
          </div>
        </div>

        <div class="charts">
          <div class="chart-card"><h3 style="color:var(--accent);margin:0 0 8px 0">Évolution des prêts</h3><canvas id="loanChart"></canvas></div>
          <div class="chart-card"><h3 style="color:var(--accent);margin:0 0 8px 0">Type de prêts</h3><canvas id="loanTypeChart"></canvas></div>
        </div>
      </section>

      <!-- ===== POULTRY (Production Avicole) ===== -->
      <section id="poultry-content" class="content-section" style="display:none">
        <h3 style="color:var(--accent);margin:0 0 10px 0">Production Avicole</h3>

        <div class="cards">
          <div class="card"><h3>Production Mensuelle</h3><div class="value">14,000 œufs</div><div class="foot">Moyenne</div></div>
          <div class="card"><h3>Ventes</h3><div class="value">2,700.00 G</div><div class="foot">Ce mois</div></div>
          <div class="card"><h3>Bénéfice Net</h3><div class="value">1,720.00 G</div><div class="foot">Ce mois</div></div>
        </div>

        <div class="service-info"><strong style="color:var(--accent)">Nos produits</strong><p style="color:var(--muted);margin-top:8px">Produits locaux, contrôles qualité et livraison disponible.</p></div>

        <div class="list">
          <div class="item">
            <img src="images/poulet.jpg" alt="Poulet fermier">
            <div class="meta">
              <h4>Poulet fermier</h4>
              <p>Élevé en plein air • Poids moyen 1.6–2.2 kg • Saveur naturelle.</p>
              <div class="price">500 G / kg</div>
              <a class="btn" href="sell.html?type=product&model=Poulet%20fermier&price=500">Commander</a>
            </div>
          </div>

          <div class="item">
            <img src="images/porc.jpg" alt="Porc local">
            <div class="meta">
              <h4>Porc local</h4>
              <p>Différentes découpes • Viande tendre • Production locale.</p>
              <div class="price">450 G / kg</div>
              <a class="btn" href="sell.html?type=product&model=Porc%20local&price=450">Commander</a>
            </div>
          </div>

          <div class="item">
            <img src="images/canard.jpg" alt="Canard">
            <div class="meta">
              <h4>Canard</h4>
              <p>Élevage soigné • Viande idéale pour plats gastronomiques.</p>
              <div class="price">620 G / kg</div>
              <a class="btn" href="sell.html?type=product&model=Canard&price=620">Commander</a>
            </div>
          </div>
        </div>

        <div class="charts">
          <div class="chart-card"><h3 style="color:var(--accent);margin:0 0 8px 0">Production mensuelle</h3><canvas id="productionChart"></canvas></div>
          <div class="chart-card"><h3 style="color:var(--accent);margin:0 0 8px 0">Répartition des ventes</h3><canvas id="salesChart"></canvas></div>
        </div>
      </section>

      <!-- ===== CLIENTS (15 entries) ===== -->
      <section id="clients-content" class="content-section" style="display:none">
        <h3 style="color:var(--accent);margin:0 0 10px 0">Clients</h3>
        <div class="clients" role="table" aria-label="Liste des clients">
          <table>
            <thead>
              <tr><th>Nom</th><th>Email</th><th>Téléphone</th><th>Service</th><th>Statut</th></tr>
            </thead>
            <tbody>
              <tr><td>Jean Pierre</td><td>jean.pierre@email.com</td><td>+50934567890</td><td>Prêt Auto</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Marie Laurent</td><td>marie.laurent@email.com</td><td>+50936123456</td><td>Avicole</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Paul Joseph</td><td>paul.joseph@email.com</td><td>+50937890123</td><td>Prêt Auto</td><td><span class="status pending">En attente</span></td></tr>
              <tr><td>Sophie Désir</td><td>sophie.desir@email.com</td><td>+50938456789</td><td>Avicole</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Marc Antoine</td><td>marc.antoine@email.com</td><td>+50939012345</td><td>Prêt Auto</td><td><span class="status pending">En attente</span></td></tr>
              <tr><td>Michel Charles</td><td>michel.charles@email.com</td><td>+50939223344</td><td>Prêt Auto</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Louise François</td><td>louise.francois@email.com</td><td>+50932556677</td><td>Avicole</td><td><span class="status pending">En attente</span></td></tr>
              <tr><td>David Louis</td><td>david.louis@email.com</td><td>+50933447788</td><td>Prêt Auto</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Nadia Monrose</td><td>nadia.monrose@email.com</td><td>+50931112233</td><td>Avicole</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Patrick René</td><td>patrick.rene@email.com</td><td>+50935667788</td><td>Prêt Auto</td><td><span class="status pending">En attente</span></td></tr>
              <tr><td>Julie Saintil</td><td>julie.saintil@email.com</td><td>+50936778899</td><td>Avicole</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Samuel Théodore</td><td>samuel.theodore@email.com</td><td>+50937556677</td><td>Prêt Auto</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Claudine Victor</td><td>claudine.victor@email.com</td><td>+50934889900</td><td>Avicole</td><td><span class="status pending">En attente</span></td></tr>
              <tr><td>Olivier Henry</td><td>olivier.henry@email.com</td><td>+50935223344</td><td>Prêt Auto</td><td><span class="status active">Actif</span></td></tr>
              <tr><td>Karine Dessalines</td><td>karine.dessalines@email.com</td><td>+50936334455</td><td>Avicole</td><td><span class="status active">Actif</span></td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- ===== REPORTS ===== -->
      <section id="reports-content" class="content-section" style="display:none">
        <h3 style="color:var(--accent);margin:0 0 10px 0">Rapports & Analyses</h3>

        <div class="cards">
          <div class="card"><h3>Revenus totaux</h3><div class="value">120,000 G</div><div class="foot">Période sélectionnée</div></div>
          <div class="card"><h3>Dépenses</h3><div class="value">75,000 G</div><div class="foot">Période sélectionnée</div></div>
          <div class="card"><h3>Bénéfice net</h3><div class="value">45,000 G</div><div class="foot">Période sélectionnée</div></div>
          <div class="card"><h3>Nouveaux clients</h3><div class="value">24</div><div class="foot">Ce mois</div></div>
        </div>

        <div class="charts">
          <div class="chart-card"><h3 style="color:var(--accent);margin:0 0 8px 0">Revenus / Dépenses</h3><canvas id="reportFinanceChart"></canvas></div>
          <div class="chart-card"><h3 style="color:var(--accent);margin:0 0 8px 0">Performance</h3><canvas id="reportPerfChart"></canvas></div>
        </div>

        <div class="report-card" style="margin-top:12px;">
          <h4 style="margin:0 0 8px 0">Résumé mensuel</h4>
          <p style="color:var(--muted)">Revenus: <strong>120,000 G</strong> • Dépenses: <strong>75,000 G</strong> • Bénéfice net: <strong>45,000 G</strong> • Nouveaux clients: <strong>24</strong></p>
        </div>
      </section>

      <!-- ===== SETTINGS / PARAMÈTRES ===== -->
      <section id="settings-content" class="content-section" style="display:none">
        <h3 style="color:var(--accent);margin:0 0 10px 0">Paramètres</h3>

        <div class="settings-grid">
          <div class="settings-card">
            <h4 style="color:var(--accent);margin-bottom:8px">Informations Entreprise</h4>
            <p><strong>Nom :</strong> NOE - Business Institute</p>
            <p><strong>Devise :</strong> Gourdes (G)</p>
            <p><strong>Email support :</strong> support@noe.example</p>
            <p><strong>Taux conversion (USD→G) :</strong> 1 USD = 150 G</p>
          </div>

          <div class="settings-card">
            <h4 style="color:var(--accent);margin-bottom:8px">Notifications & Préférences</h4>
            <p style="display:flex;justify-content:space-between;align-items:center"><span>Email</span><label class="toggle"><input type="checkbox" checked><span class="slider"></span></label></p>
            <p style="display:flex;justify-content:space-between;align-items:center"><span>SMS</span><label class="toggle"><input type="checkbox"><span class="slider"></span></label></p>
            <p style="display:flex;justify-content:space-between;align-items:center"><span>Rapports hebdomadaires</span><label class="toggle"><input type="checkbox" checked><span class="slider"></span></label></p>
            <p><strong>Langue :</strong> Français</p>
          </div>

          <div class="settings-card">
            <h4 style="color:var(--accent);margin-bottom:8px">Sécurité</h4>
            <p style="display:flex;justify-content:space-between;align-items:center"><span>Authentification 2FA</span><label class="toggle"><input type="checkbox" checked><span class="slider"></span></label></p>
            <p style="display:flex;justify-content:space-between;align-items:center"><span>Connexions suspectes</span><label class="toggle"><input type="checkbox" checked><span class="slider"></span></label></p>
            <p><strong>Journal d'activité :</strong> Activé</p>
          </div>

          <div class="settings-card">
            <h4 style="color:var(--accent);margin-bottom:8px">Sauvegarde & Stockage</h4>
            <p><strong>Sauvegarde automatique :</strong> Activée</p>
            <p><strong>Dernière sauvegarde :</strong> 12/10/2025</p>
            <p><strong>Limite stockage :</strong> 2.5 GB / 5 GB</p>
          </div>
        </div>
      </section>

      <footer style="margin-top:18px;color:var(--muted)">© 2025 NOE — Tous droits réservés</footer>
    </main>
  </div>

  <!-- Chat -->
  <div class="chat-btn" id="chatBtn" title="Assistance">
    <i class="fas fa-comments"></i>
  </div>
  <div class="chat-panel" id="chatPanel" aria-hidden="true">
    <header><div><strong>Assistant NOE</strong><br><small style="color:var(--muted)">IA + support humain</small></div><button id="closeChat" style="background:none;border:none;color:var(--text)"><i class="fas fa-times"></i></button></header>
    <div class="chat-messages" id="chatMessages"><div class="bot">Bonjour ! Je peux aider pour une réservation ou une commande.</div></div>
    <footer><input id="chatInput" placeholder="Écrire..." aria-label="Message"/><button id="chatSend" class="btn">Envoyer</button></footer>
  </div>

  <!-- ========== SCRIPTS ========== -->
  <script>
    // --- Navigation (sidebar buttons)
    document.querySelectorAll('nav.nav button').forEach(btn=>{
      btn.addEventListener('click', function(){
        document.querySelectorAll('nav.nav button').forEach(b=>b.classList.remove('active'));
        this.classList.add('active');
        const target = this.getAttribute('data-section') + '-content';
        // hide all
        document.querySelectorAll('.content-section').forEach(s=>s.style.display='none');
        const el = document.getElementById(target);
        if(el) el.style.display = 'block';
        // update top title
        document.querySelector('.title h2').textContent = this.textContent.trim();
        // close sidebar on mobile
        if(window.innerWidth <= 980) document.getElementById('sidebar').classList.remove('open');
      });
    });

    // ensure dashboard visible on load
    document.querySelectorAll('.content-section').forEach(s=>s.style.display='none');
    document.getElementById('dashboard-content').style.display='block';

    // Hamburger toggle for mobile
    const hamburger = document.getElementById('hamburger');
    const sidebar = document.getElementById('sidebar');
    hamburger.addEventListener('click', ()=> {
      sidebar.classList.toggle('open');
    });

    // --- Charts / Data (Chart.js)
    function hexToRgba(hex,alpha=1){
      const h = hex.replace('#','');
      const r = parseInt(h.substring(0,2),16);
      const g = parseInt(h.substring(2,4),16);
      const b = parseInt(h.substring(4,6),16);
      return `rgba(${r},${g},${b},${alpha})`;
    }

    // Finance chart
    const ctxF = document.getElementById('financeChart').getContext('2d');
    new Chart(ctxF, {
      type:'line',
      data:{
        labels:['Jan','Fév','Mar','Avr','Mai','Jun','Jul'],
        datasets:[
          {label:'Revenus (G)', data:[110000,115000,120000,130000,125000,120000,140000], borderColor:hexToRgba('#00c2a8',1), backgroundColor:hexToRgba('#00c2a8',0.12), tension:0.3, fill:true},
          {label:'Dépenses (G)', data:[70000,72000,75000,78000,77000,75000,79000], borderColor:hexToRgba('#f72585',1), backgroundColor:hexToRgba('#f72585',0.08), tension:0.3, fill:true}
        ]
      },
      options:{responsive:true,plugins:{legend:{position:'top'}}}
    });

    // Service chart (doughnut)
    const ctxS = document.getElementById('serviceChart').getContext('2d');
    new Chart(ctxS, {
      type:'doughnut',
      data:{
        labels:['Prêts Auto','Avicole','Autres'],
        datasets:[{data:[55,35,10], backgroundColor:[hexToRgba('#00c2a8',1),hexToRgba('#4cc9f0',1),hexToRgba('#4361ee',1)]}]
      },
      options:{responsive:true}
    });

    // Loan charts
    const loanCtx = document.getElementById('loanChart').getContext('2d');
    new Chart(loanCtx, {
      type:'line',
      data:{labels:['Jan','Fév','Mar','Avr','Mai','Jun','Jul'],datasets:[{label:'Prêts approuvés (G)',data:[12000,15000,13000,17000,16000,17400,18000],borderColor:hexToRgba('#00c2a8',1),tension:0.3,fill:false}]},
      options:{responsive:true}
    });

    const loanTypeCtx = document.getElementById('loanTypeChart').getContext('2d');
    new Chart(loanTypeCtx, {
      type:'doughnut',
      data:{labels:['Neuves','Occasion','Motos','Utilitaires'],datasets:[{data:[45,35,12,8], backgroundColor:[hexToRgba('#00c2a8',1),hexToRgba('#05827d',1),hexToRgba('#4cc9f0',1),hexToRgba('#f72585',1)]}]},
      options:{responsive:true}
    });

    // Production charts
    const prodCtx = document.getElementById('productionChart').getContext('2d');
    new Chart(prodCtx, {type:'bar', data:{labels:['Jan','Fév','Mar','Avr','Mai','Jun','Jul'],datasets:[{label:'Œufs produits',data:[12000,12500,13000,13500,13200,14000,14200],backgroundColor:hexToRgba('#4cc9f0',1)}]}, options:{responsive:true}});

    const salesCtx = document.getElementById('salesChart').getContext('2d');
    new Chart(salesCtx, {type:'pie', data:{labels:['Détaillants','Supermarchés','Restaurants','Particuliers'],datasets:[{data:[40,35,15,10],backgroundColor:[hexToRgba('#00c2a8',1),hexToRgba('#05827d',1),hexToRgba('#4cc9f0',1),hexToRgba('#f72585',1)]}]}, options:{responsive:true}});

    // Reports charts
    const rF = document.getElementById('reportFinanceChart').getContext('2d');
    new Chart(rF, {type:'line', data:{labels:['Jan','Fév','Mar','Avr','Mai','Jun','Jul'],datasets:[{label:'Revenus',data:[90000,100000,110000,120000,115000,120000,125000],borderColor:hexToRgba('#00c2a8',1)},{label:'Dépenses',data:[60000,65000,70000,75000,73000,75000,77000],borderColor:hexToRgba('#f72585',1)}]}, options:{responsive:true}});

    const rP = document.getElementById('reportPerfChart').getContext('2d');
    new Chart(rP, {type:'doughnut', data:{labels:['Prêts','Avicole','Autres'],datasets:[{data:[58,32,10],backgroundColor:[hexToRgba('#00c2a8',1),hexToRgba('#4cc9f0',1),hexToRgba('#4361ee',1)]}]}, options:{responsive:true}});

    // --- Chat behaviour (simple) ---
    const chatBtn = document.getElementById('chatBtn');
    const chatPanel = document.getElementById('chatPanel');
    const closeChat = document.getElementById('closeChat');
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    const chatSend = document.getElementById('chatSend');

    chatBtn && chatBtn.addEventListener('click', ()=>{ chatPanel.style.display='flex'; chatPanel.setAttribute('aria-hidden','false'); chatInput && chatInput.focus(); });
    closeChat && closeChat.addEventListener('click', ()=>{ chatPanel.style.display='none'; chatPanel.setAttribute('aria-hidden','true'); });

    function addChat(msg,who='bot'){ const d=document.createElement('div'); d.textContent=msg; d.className=who; chatMessages.appendChild(d); chatMessages.scrollTop = chatMessages.scrollHeight; }
    chatSend && chatSend.addEventListener('click', ()=>{ const t = chatInput.value.trim(); if(!t) return; addChat(t,'user'); chatInput.value=''; setTimeout(()=> addChat("Merci — un agent vous contactera bientôt. Ou écrivez à support@noe.example"),800); });
    chatInput && chatInput.addEventListener('keydown',(e)=>{ if(e.key==='Enter') chatSend.click(); });

    // Accessibility: keyboard nav on sidebar
    document.querySelectorAll('nav.nav button').forEach(btn=>{
      btn.addEventListener('keydown', e=>{
        if(e.key === 'Enter' || e.key === ' ') btn.click();
      });
    });

    // Close sidebar if clicking outside on mobile
    document.addEventListener('click', function(e){
      if(window.innerWidth <= 980){
        const side = document.getElementById('sidebar');
        if(!side.contains(e.target) && !document.getElementById('hamburger').contains(e.target)){
          side.classList.remove('open');
        }
      }
    });
  </script>
</body>
</html>
